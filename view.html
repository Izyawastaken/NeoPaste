<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="NeoPaste is a modern, aesthetic, and fast Pok√©Paste successor proudly built by Izya">
  <title>NeoPaste Viewer</title>

  <!-- Critical inline styles for immediate rendering -->
  <style>
    /* Critical CSS for immediate rendering */
    body{
      font-family:'Fredoka',sans-serif;
      background:linear-gradient(135deg,#f0f2f5,#e6eaf1);
      color:#333;margin:0;padding:2rem;text-align:center;
      transition:background .4s ease,color .4s ease;
      opacity:0;
    }
    body.loaded{opacity:1;}
    body.dark{background:linear-gradient(135deg,#1c1c1c,#121212);color:#eee}
    .container{max-width:1200px;margin:auto;padding:2rem}
    h1{font-size:2.5rem;color:#ff7a00;margin-bottom:.2rem}
    #team-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-top:2rem}
    .pokemon-card{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 4px 16px rgba(0,0,0,0.1)}
  </style>

  <!-- Critical Theme Script (unchanged, for dark mode) -->
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const saved = localStorage.getItem("theme");
      if (!saved || saved === "dark") {
        document.body.classList.add("dark");
      }
    });
  </script>

  <!-- Preload and load CSS optimally -->
  <link rel="preload" href="view.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="view.css"></noscript>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap"></noscript>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="preconnect" href="https://pokeapi.co" />
</head>

<body>
  <div class="accent-picker-container">
    <input type="color" id="accentColorPicker" aria-label="Pick accent color" value="#ff9800" />
    <span class="accent-circle"></span>
  </div>
  <div class="container">
    <header>
      <h1 id="paste-title">Loading‚Ä¶</h1>
      <p class="subtitle" id="paste-author"></p>
    </header>
    <!-- Dynamically Populated Team Cards -->
    <div id="team-container" role="main"></div>
    <!-- Footer -->
    <footer>
      <!-- Hidden Raw Paste Preview -->
      <pre id="pasteDisplay" style="display: none;"></pre>
      <!-- Action Buttons -->
      <div class="footer-buttons">
        <button id="copyBtn" class="fancy-btn">Copy to Clipboard</button>
        <button id="layoutToggle" class="fancy-btn">Vertical Layout</button>
        <button id="toggle-ani-sprites" class="fancy-btn" type="button">Animated Sprites</button>
        <button id="openCalcBtn" class="fancy-btn" style="display:none"> Open in Calculator</button>
        <button id="toggleExpertMode" class="fancy-btn">Show Raw Damage Modifiers</button>
        <div id="secret-btns">Visit The Creator!</div>   
        </footer>

      </div>
      <div id="report-issue-container" style="text-align:center; margin: 2rem 0;">
        <a href="https://github.com/Izyawastaken/NeoPaste/issues" target="_blank" rel="noopener noreferrer" class="report-btn">
          üêõ Report Issues Here
        </a>
      </div>
      <a href="index.html" class="back-link">Back to Paste Builder</a>
  </div>

  <!-- Scripts: loaded optimally for performance -->
  <script>
    // Load Lenis smoothly only if needed
    window.addEventListener("DOMContentLoaded", () => {
      if (window.innerWidth > 768) { // Only on desktop
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.25/bundled/lenis.min.js';
        script.onload = () => {
          if (window.Lenis) {
            const lenis = new Lenis({ duration: 1.2, smooth: true });
            function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
            requestAnimationFrame(raf);
          }
        };
        document.head.appendChild(script);
      }
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js" defer></script>
  <script src="performance.js" defer></script>
  <script src="config.js" defer></script>
  <script src="view-optimized.js" defer></script>
  
  <!-- Service Worker Registration -->
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(registration => console.log('SW registered'))
        .catch(error => console.log('SW registration failed'));
    });
  }
  
  // Add loaded class for fade-in effect
  window.addEventListener('load', () => {
    document.body.classList.add('loaded');
  });
  </script>
  <script>
  // Optimized accent color picker logic
  document.addEventListener('DOMContentLoaded', function() {
    const picker = document.getElementById('accentColorPicker');
    const circle = document.querySelector('.accent-circle');
    const defaultAccent = '#ff9800';
    
    // Restore accent from localStorage
    const saved = localStorage.getItem('accentColor') || defaultAccent;
    setAccent(saved);
    picker.value = saved;
    
    // Use passive event listener for better performance
    picker.addEventListener('input', function(e) {
      setAccent(e.target.value);
      localStorage.setItem('accentColor', e.target.value);
    }, { passive: true });
    
    function setAccent(color) {
      document.documentElement.style.setProperty('--accent', color);
      if (circle) circle.style.background = color;
    }
  });

  // Accent color sync (shared with index.html)
  (function() {
    const ACCENT_KEY = 'neopaste-accent';
    function setAccent(color) {
      document.documentElement.style.setProperty('--accent', color);
      localStorage.setItem(ACCENT_KEY, color);
      const circle = document.querySelector('.accent-circle');
      if (circle) circle.style.background = color;
    }
    // On load, restore accent
    const savedAccent = localStorage.getItem(ACCENT_KEY);
    if (savedAccent) setAccent(savedAccent);
    else setAccent(getComputedStyle(document.documentElement).getPropertyValue('--accent'));
    // If accent picker exists, wire it up
    const accentInput = document.getElementById('accentColorPicker');
    if (accentInput) {
      accentInput.addEventListener('input', e => setAccent(e.target.value));
    }
  })();

  // Export PNG functionality removed
  </script>
</body>
</html>

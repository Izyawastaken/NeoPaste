import{j as t}from"./index-Dti5_RhW.js";import{r}from"./vendor-BNM8eXaP.js";import{c as T}from"./supabase-C-8FjU3g.js";import{b as P,L as B}from"./router-DAhkMhWZ.js";import{p as F,A as q}from"./AccentPicker-D8fftsQz.js";function R(e){return e.toLowerCase().normalize("NFD").replace(/[ÃÄ-ÕØ]/g,"").replace(/[^a-z0-9]/g,"")}function z(e){return e.toLowerCase().normalize("NFD").replace(/[ÃÄ-ÕØ]/g,"").replace(/[^a-z0-9-]/g,"")}const U=["normal","fire","water","electric","grass","ice","fighting","poison","ground","flying","psychic","bug","rock","ghost","dragon","dark","steel","fairy"];function V(e){const a=R(e.trim());return U.includes(a)?a:null}class _{cache=new Map;maxSize;constructor(a=100){this.maxSize=a}get(a){if(this.cache.has(a)){const n=this.cache.get(a);return this.cache.delete(a),this.cache.set(a,n),n}}set(a,n){if(this.cache.has(a))this.cache.delete(a);else if(this.cache.size>=this.maxSize){const s=this.cache.keys().next().value;s!==void 0&&this.cache.delete(s)}this.cache.set(a,n)}clear(){this.cache.clear()}}const O="https://pywievpwcedaareqkuxm.supabase.co",D="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB5d2lldnB3Y2VkYWFyZXFrdXhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzMTA5MjMsImV4cCI6MjA2Nzg4NjkyM30.wHvcWCjkejn811z_ELF-9zvoR8_UjIYJd2e57A8QBIs",J=T(O,D),M={adamant:{up:"atk",down:"spa"},modest:{up:"spa",down:"atk"},timid:{up:"spe",down:"atk"},jolly:{up:"spe",down:"spa"},bold:{up:"def",down:"atk"},calm:{up:"spd",down:"atk"},careful:{up:"spd",down:"spa"},impish:{up:"def",down:"spa"},relaxed:{up:"def",down:"spe"},quiet:{up:"spa",down:"spe"},brave:{up:"atk",down:"spe"},lonely:{up:"atk",down:"def"}},H={"indeedee-f":"indeedee-female","indeedee-m":"indeedee-male","meowstic-f":"meowstic-female","meowstic-m":"meowstic-male","basculegion-f":"basculegion-female","basculegion-m":"basculegion-male","oinkologne-f":"oinkologne-female","oinkologne-m":"oinkologne-male","frillish-f":"frillish-female","frillish-m":"frillish-male","jellicent-f":"jellicent-female","jellicent-m":"jellicent-male","pyroar-f":"pyroar-female","pyroar-m":"pyroar-male","unfezant-f":"unfezant-female","unfezant-m":"unfezant-male",indeedee:"indeedee-male",meowstic:"meowstic-male",basculegion:"basculegion-male",oinkologne:"oinkologne-male",frillish:"frillish-male",jellicent:"jellicent-male",pyroar:"pyroar-male",unfezant:"unfezant-male","rotom-wash":"rotom-wash","rotom-heat":"rotom-heat","rotom-frost":"rotom-frost","rotom-fan":"rotom-fan","rotom-mow":"rotom-mow",rotom:"rotom","urshifu-rapid-strike":"urshifu-rapid-strike","urshifu-single-strike":"urshifu-single-strike",urshifu:"urshifu-single-strike","zacian-crowned":"zacian-crowned","zamazenta-crowned":"zamazenta-crowned","calyrex-ice":"calyrex-ice","calyrex-shadow":"calyrex-shadow","toxtricity-low-key":"toxtricity-low-key","toxtricity-amped":"toxtricity-amped",toxtricity:"toxtricity-amped","basculin-blue-striped":"basculin-blue-striped","basculin-white-striped":"basculin-white-striped","basculin-red-striped":"basculin-red-striped",basculin:"basculin-red-striped","lycanroc-midnight":"lycanroc-midnight","lycanroc-dusk":"lycanroc-dusk",lycanroc:"lycanroc","darmanitan-galar":"darmanitan-galar","darmanitan-galar-zen":"darmanitan-galar-zen",darmanitan:"darmanitan","giratina-origin":"giratina-origin",giratina:"giratina-altered","shaymin-sky":"shaymin-sky",shaymin:"shaymin-land","tornadus-therian":"tornadus-therian","thundurus-therian":"thundurus-therian","landorus-therian":"landorus-therian",tornadus:"tornadus-incarnate",thundurus:"thundurus-incarnate",landorus:"landorus-incarnate","enamorus-therian":"enamorus-therian",enamorus:"enamorus-incarnate","zygarde-10":"zygarde-10","zygarde-complete":"zygarde-complete",zygarde:"zygarde","polteageist-antique":"polteageist",polteageist:"polteageist","sinistea-antique":"sinistea",sinistea:"sinistea","minior-red":"minior-red-meteor",minior:"minior-red-meteor","mimikyu-busted":"mimikyu-busted",mimikyu:"mimikyu-disguised",greattusk:"great-tusk",screamtail:"scream-tail",brutebonnet:"brute-bonnet",fluttermane:"flutter-mane",slitherwing:"slither-wing",sandyshocks:"sandy-shocks",irontreads:"iron-treads",ironbundle:"iron-bundle",ironhands:"iron-hands",ironjugulis:"iron-jugulis",ironmoth:"iron-moth",ironthorns:"iron-thorns",roaringmoon:"roaring-moon",ironvaliant:"iron-valiant"};function ce(){const{id:e}=P(),[a,n]=r.useState("Loading‚Ä¶"),[s,o]=r.useState(""),[i,l]=r.useState(""),[f,p]=r.useState([]),[d,u]=r.useState(()=>{const c=localStorage.getItem("sanctum-ani-sprites");return c===null?!0:c==="true"}),[y,g]=r.useState(!1),[b,w]=r.useState(!1),[j,v]=r.useState(!1),[N,ae]=r.useTransition();r.useRef(new _(100)),r.useRef(null),r.useEffect(()=>{const c=!!document.querySelector('meta[name="neoShowdownExtPresent"]');if(w(c),!c){const m=new MutationObserver(()=>{!!document.querySelector('meta[name="neoShowdownExtPresent"]')&&(w(!0),m.disconnect())});return m.observe(document.head,{childList:!0}),()=>m.disconnect()}},[]),r.useEffect(()=>{if(!e){n("Invalid Paste Link");return}(async()=>{const{data:c}=await J.from("pastes").select().eq("id",e).single();if(!c){n("Paste Not Found");return}n(c.title||"Untitled Paste"),o(c.author||""),l(c.content||"");const m=F(c.content||"");p(m);const x=document.head;[...x.querySelectorAll("link[data-preload-sprite]")].forEach(h=>h.remove()),m.forEach(h=>{const k=z(h.name),$=`https://play.pokemonshowdown.com/sprites/gen5${h.shiny?"-shiny":""}/${k}.png`,S=document.createElement("link");S.rel="preload",S.as="image",S.href=$,S.setAttribute("data-preload-sprite",""),x.appendChild(S)})})()},[e]),r.useEffect(()=>{localStorage.setItem("sanctum-ani-sprites",d?"true":"false")},[d]);const L=r.useCallback(async()=>{await navigator.clipboard.writeText((i||"").trim()),v(!0),setTimeout(()=>v(!1),1200)},[i]),[se,E]=r.useState(!1),A=r.useCallback(()=>{E(!0),document.body.style.cursor="crosshair",document.querySelectorAll(".pokemon-card").forEach(h=>{h.classList.add("calculator-selectable"),h.title="Click to open this set in the Showdown Calculator"});function m(h){const k=h.target.closest(".pokemon-card.calculator-selectable");k&&(h.stopPropagation(),te(k,i)),x()}function x(){E(!1),document.body.style.cursor="",document.querySelectorAll(".pokemon-card").forEach(k=>{k.classList.remove("calculator-selectable"),k.title=""}),document.removeEventListener("click",m,{capture:!0})}document.addEventListener("click",m,{capture:!0})},[i]);return t.jsxs("div",{className:"container",children:[t.jsxs("header",{children:[t.jsx("h1",{id:"paste-title",children:a}),t.jsx("p",{className:"subtitle",id:"paste-author",children:s?`By ${s}`:""})]}),t.jsx("div",{id:"team-container",className:"grid-layout",children:f.map((c,m)=>t.jsx(X,{mon:c,aniSprites:d,expertMode:y},m))}),t.jsxs("footer",{children:[t.jsx("pre",{id:"pasteDisplay",style:{display:"none"},children:i}),t.jsxs("div",{className:"footer-buttons",children:[t.jsx("button",{id:"copyBtn",className:`fancy-btn ${j?"copied":""}`,onClick:L,children:j?"üìã Copied!":"üìã Copy to Clipboard"}),t.jsx(Y,{}),t.jsx("button",{className:"fancy-btn",onClick:()=>u(c=>!c),children:d?"Static Sprites":"Animated Sprites"}),t.jsx("button",{id:"toggleExpertMode",className:"fancy-btn",onClick:()=>g(c=>!c),children:y?"Hide Raw Damage Modifiers":"Show Raw Damage Modifiers"}),b&&t.jsx("button",{id:"openCalcBtn",className:"fancy-btn",onClick:A,children:"Open in Calculator"})]}),t.jsx("div",{id:"secret-btns",children:ee(s)})]}),t.jsx("div",{id:"report-issue-container",style:{textAlign:"center",margin:"2rem 0"},children:t.jsx("a",{href:"https://github.com/Izyawastaken/NeoPaste/issues",target:"_blank",rel:"noreferrer",className:"report-btn",children:"üêõ Report Issues Here"})}),t.jsx(B,{to:"/",className:"back-link",children:"Back to Paste Builder"}),t.jsx(q,{})]})}function Y(){const[e,a]=r.useState("grid"),[n,s]=r.useState(window.innerWidth<=768);return r.useEffect(()=>{const o=document.getElementById("team-container");o&&(n?(o.classList.remove("horizontal-layout"),o.classList.add("mobile-layout")):(o.classList.remove("mobile-layout"),o.classList.toggle("horizontal-layout",e==="horizontal"),o.classList.toggle("grid-layout",e==="grid")))},[e,n]),r.useEffect(()=>{const o=()=>s(window.innerWidth<=768);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),n?null:t.jsx("button",{id:"layoutToggle",className:"fancy-btn",onClick:()=>a(o=>o==="grid"?"horizontal":"grid"),children:e==="grid"?"Switch to Horizontal Layout":"Switch to Grid Layout"})}function X({mon:e,aniSprites:a,expertMode:n}){const s=z(e.name),o=e.shiny?`https://play.pokemonshowdown.com/sprites/gen5-shiny/${s}.png`:`https://play.pokemonshowdown.com/sprites/gen5/${s}.png`,i=e.shiny?`https://play.pokemonshowdown.com/sprites/gen5ani-shiny/${s}.gif`:`https://play.pokemonshowdown.com/sprites/gen5ani/${s}.gif`,l=e.shiny?`https://play.pokemonshowdown.com/sprites/ani-shiny/${s}.gif`:`https://play.pokemonshowdown.com/sprites/ani/${s}.gif`,[f,p]=r.useState(a?i:o);r.useEffect(()=>{p(a?i:o)},[a,i,o]);const d=V(e.teraType||""),u=d?`type-${d}`:"",y=r.useMemo(()=>{if(!e.item)return null;const b=`/Items/${e.item.toLowerCase().replace(/ /g,"-").replace(/[^a-z0-9-]/g,"")}.png`;return t.jsx("img",{className:"item-icon",src:b,alt:e.item,title:e.item,loading:"lazy",onError:w=>{const j=w.target;j.style.display="none"}})},[e.item]);return t.jsxs("div",{className:"pokemon-card",children:[t.jsxs("div",{className:"card-header",children:[t.jsx("h2",{children:e.nickname?`${e.nickname} (${e.name})`:e.name}),t.jsxs("p",{className:"item-line",children:["@ ",t.jsxs("span",{children:[e.item||"None",y]})]})]}),t.jsx("img",{src:f,alt:e.name,"data-pokemon-name":e.name,"data-shiny":e.shiny?"1":"0",onError:()=>p(g=>g===i?l:o)}),t.jsxs("p",{children:[t.jsx("strong",{children:"Ability:"})," ",t.jsx("span",{className:"info-pill ability-pill",children:e.ability||"‚Äî"})]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Tera Type:"})," ",t.jsx("span",{className:`info-pill ${u}`,children:e.teraType||"‚Äî"})]}),t.jsx(K,{mon:e}),t.jsxs("p",{children:[t.jsx("strong",{children:"EVs:"})," ",Z(e.evs)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"IVs:"})," ",G(e.ivs)]}),t.jsx(W,{mon:e,expertMode:n}),t.jsxs("div",{className:"moves",children:[t.jsx("strong",{children:"Moves:"}),t.jsx("div",{className:"move-pill-container",children:t.jsx(Q,{moves:e.moves})})]})]})}function K({mon:e}){const a=(e.nature||"").toLowerCase(),n=M[a]?.up,s={hp:"HP",atk:"ATK",def:"DEF",spa:"SPA",spd:"SPD",spe:"SPE"},o=n?`stat-${n}`:"",i=n?s[n]:"";return t.jsxs("p",{children:[t.jsx("strong",{children:"Nature:"})," ",t.jsx("span",{className:`info-pill nature-pill ${o}`,"data-boost":i||void 0,children:e.nature||"‚Äî"})]})}function W({mon:e,expertMode:a}){const[n,s]=r.useState([]);r.useEffect(()=>{let i=!1;return(async()=>{try{const l=z(e.name),f=H[l]||l,d=await(await fetch(`https://pokeapi.co/api/v2/pokemon/${f}`)).json();i||s(d.stats||[])}catch{i||s([])}})(),()=>{i=!0}},[e.name]),r.useEffect(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".stat-bar-fill").forEach(i=>{const l=+i.dataset.base;i.style.width=`${Math.min(100,l/255*100)}%`,i.style.backgroundColor=l>=130?"#00e676":l>=100?"#ffee58":l>=70?"#ffa726":"#ef5350"})})},[n]);const o=M[(e.nature||"").toLowerCase()]||{};return t.jsx("div",{className:"stat-block",children:n.map((i,l)=>{const f=i.stat.name,p=C[f]||f.toUpperCase(),d=i.base_stat,u=p.toLowerCase(),y=u===o.up?"+":u===o.down?"‚àí":"",g=e.evs?.[u]??0,b=e.ivs?.[u]??(u==="atk"?0:31);let w=d;if(a)if(u==="hp")w=Math.floor((2*d+b+Math.floor(g/4))*100/100)+100+10;else{const v=Math.floor((2*d+b+Math.floor(g/4))*100/100)+5,N=u===o.up?1.1:u===o.down?.9:1;w=Math.floor(v*N)}return t.jsxs("div",{className:"stat-line",children:[t.jsx("span",{className:`stat-label ${u}`,children:p}),t.jsx("div",{className:"stat-bar",children:t.jsx("div",{className:"stat-bar-fill","data-base":d})}),y?t.jsx("span",{className:`stat-modifier ${y==="+"?"plus":"minus"}`,children:y}):null,t.jsx("span",{className:"stat-value","data-base":d,"data-stat":u,"data-ev":g,"data-iv":b,children:w})]},l)})})}const C={hp:"HP",attack:"Atk",defense:"Def","special-attack":"SpA","special-defense":"SpD",speed:"Spe"};function Z(e={}){return Object.entries(e).filter(([,a])=>a>0).map(([a,n])=>{const s=(C[a]||a).toLowerCase();return t.jsxs("span",{className:`info-pill stat-${s}`,children:[n," ",(C[a]||a).toUpperCase()]},a)})}function I(e){const a=e<.5?255:Math.round(510*(1-e)),n=e<.5?Math.round(510*e):255;return`rgb(${a}, ${n}, 100)`}function G(e={}){const a=Object.entries(e).filter(([,n])=>n<31).map(([n,s])=>t.jsxs("span",{className:"info-pill",style:{backgroundColor:I(s/31)},children:[s," ",n.toUpperCase()]},n));return a.length?a:t.jsx("span",{className:"info-pill",style:{backgroundColor:I(1)},children:"Default (31)"})}function Q({moves:e}){const[a,n]=r.useState({});return r.useEffect(()=>{let s=!1;return(async()=>{const o=await Promise.all(e.map(async i=>{const l=i.toLowerCase().replace(/[^a-z0-9]+/g,"-");try{const f=await fetch(`https://pokeapi.co/api/v2/move/${l}`),{type:p}=await f.json();return[i,p?.name?.toLowerCase()||"normal"]}catch{return[i,"normal"]}}));s||n(Object.fromEntries(o))})(),()=>{s=!0}},[e]),t.jsx(t.Fragment,{children:e.map(s=>t.jsx("span",{className:`move-pill type-${a[s]||"normal"}`,children:s.replace(/-/g," ")},s))})}function ee(e){const a={whimsy:[{label:"Visit the creator!",url:"https://www.twitch.tv/whimsygaming1314"}],izya:[{label:"Visit the creator!",url:"https://www.twitch.tv/izyalovesgothmommies"}],katakuna_64:[{label:"Visit the creator!",url:"https://www.twitch.tv/katakuna_64"}]},n=(e||"").toLowerCase();return a[n]?a[n].map((s,o)=>t.jsx("button",{className:"secret-btn",onClick:()=>window.open(s.url,"_blank"),children:s.label},o)):null}function te(e,a){const s=Array.from(document.querySelectorAll(".pokemon-card")).indexOf(e);if(s===-1)return;const i=(a||"").trim().split(/\n\s*\n/)[s]||"";i&&fetch("https://neocalc.agastyawastaken.workers.dev/upload",{method:"POST",headers:{"Content-Type":"text/plain"},body:i}).then(l=>l.text()).then(l=>{l&&l.length<32?window.open(`https://calc.pokemonshowdown.com/?neopaste=${encodeURIComponent(l)}`,"_blank"):alert("Failed to get token from worker.")}).catch(()=>alert("Failed to contact worker."))}export{ce as default};
